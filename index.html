<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pwd_gen</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        textarea { width: 100%; height: 100px; margin-bottom: 10px; }
        button { padding: 10px 20px; cursor: pointer; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <h2>pwd_gen</h2>
    <textarea id="inputText">Ой у лузі червона калина похилилася
Чогось наша славна Україна зажурилася</textarea>
    <button onclick="encodeText()">Encode</button>
    <h3>Result:</h3>
    <pre id="outputText"></pre>
    <h3>Password Strength:</h3>
    <pre id="passwordStrength"></pre>

    <script>
        const ukrainianAlphabet = "АБВГҐДЕЄЖЗИІЇЙКЛМНОПРСТУФХЦЧШЩЬЮЯ";
        const alphabetMapping = {};
        const minAscii = 32;
        const maxAscii = 126;
        const maxCode = maxAscii - minAscii;

        ukrainianAlphabet.split('').forEach((char, index) => {
            alphabetMapping[char] = index + 1;
        });

        function encodeText() {
            let inputText = document.getElementById("inputText").value;
            let outputText = "";
            let p = 0;
            
            inputText.split('\n').forEach(line => {
                let processedLine = "";
                for (let i = 0; i < line.length; i++) {
                    let char = line[i].toUpperCase();
                    if (alphabetMapping[char]) {
                        p++;
                        let a = alphabetMapping[char];
                        let positionScore = (a * p) % maxCode;
                        let finalScore = positionScore + minAscii;
                        processedLine += String.fromCharCode(finalScore);
                    }
                }
                outputText += processedLine + '\n';
            });
            document.getElementById("outputText").textContent = outputText;
            evaluatePasswordStrength(outputText);
        }

        function evaluatePasswordStrength(password) {
            const length = password.length;
            const uniqueChars = new Set(password).size;
            const hasUpperCase = /[A-Z]/.test(password);
            const hasLowerCase = /[a-z]/.test(password);
            const hasDigits = /[0-9]/.test(password);
            const hasSpecial = /[^A-Za-z0-9]/.test(password);
            const charsetSize = (hasUpperCase ? 26 : 0) + (hasLowerCase ? 26 : 0) + (hasDigits ? 10 : 0) + (hasSpecial ? 32 : 0);
            const entropy = length * Math.log2(charsetSize);

            let strength = "Weak";
            if (entropy > 40) strength = "Medium";
            if (entropy > 60) strength = "Strong";
            if (entropy > 80) strength = "Very Strong";

            document.getElementById("passwordStrength").textContent = `Entropy: ${entropy.toFixed(2)} bits\nStrength: ${strength}`;
        }
    </script>
</body>
</html>
